---
layout: single
title: "스파르타 내일배움 캠프 56일차 TIL"
date: 2025-08-11 19:00:00 +0900
categories: [TIL, all]
classes: wide
sidebar:
    nav: "counts"
---
<br><br>
# 📌 `uuid` + `shared_preferences`패키지 정리

---

## 1. `uuid` 패키지
### 필요성
- 사용자나 데이터마다 **전 세계에서 유일한 식별자**를 부여해야 할 때.
- 디바이스 ID 대신 쓰면 시뮬레이터·기기 변경 시에도 충돌을 피할 수 있음.
- 서버/클라이언트가 동시에 생성해도 겹칠 확률이 극히 낮음.

### 존재 이유
- UUID = *Universally Unique Identifier*.
- 랜덤 또는 시간 기반으로 **고유하고 예측 불가능한 값**을 만듦.
- DB의 Primary Key, 로그인 식별, 세션 관리 등 다양한 곳에 활용 가능.

### 사용법
```dart
import 'package:uuid/uuid.dart';

final uuid = Uuid();
String id = uuid.v4(); // 랜덤 UUID
```

---

## 2. `shared_preferences` 패키지
### 필요성
- 앱을 껐다 켜도 **데이터를 유지**해야 할 때.
- 복잡한 데이터베이스 없이 **간단한 키-값 저장소**가 필요할 때.
- 예: 자동 로그인, 앱 설정, 튜토리얼 완료 여부.

### 존재 이유
- 일반 변수는 앱을 종료하면 사라짐.
- DB는 무겁고 설정이 복잡함.
- `shared_preferences`는 내부 저장소에 파일로 기록해 앱 재실행 시 그대로 불러올 수 있음.

### 사용법
```dart
import 'package:shared_preferences/shared_preferences.dart';

final prefs = await SharedPreferences.getInstance();
await prefs.setString('uuid', 'some-id');   // 저장
final id = prefs.getString('uuid');         // 불러오기
```

---

## 3. **둘을 함께 쓰는 이유**
### 3-1. 시너지 효과
- **`uuid`** → 앱에 고유값을 생성해줌.  
- **`shared_preferences`** → 그 고유값을 앱 재실행 후에도 기억하게 해줌.  
- 결과적으로 **한 번 만든 고유 식별자를 앱이 평생 유지**할 수 있음.

### 3-2. 이번 프로젝트에서 특히 좋은 이유
- 이 프로젝트는 **중복 로그인 방지**나 **사용자 구분**이 중요함.
- 디바이스 ID는 시뮬레이터/특정 기기 환경에서 중복 가능성이 높음.
- `uuid`로 완전히 새로운 고유값을 만들고,  
  `shared_preferences`에 저장해서 앱 삭제 전까지 유지 →  
  로그인 시마다 이 값을 서버와 비교하면 중복 로그인 방지 가능.

### 3-3. 왜 꼭 같이 써야 하는지
- `uuid`만 쓰면 앱 껐다 켤 때마다 매번 값이 바뀌어서 의미 없음.
- `shared_preferences`만 쓰면, 처음에 저장할 값이 없어서 별도의 생성 로직이 필요함.
- 둘을 조합해야 **"처음에 딱 한 번 생성 → 이후 계속 유지"** 라는 구조가 가능.

---

## 4. 실제 구현 예시
```dart
import 'package:uuid/uuid.dart';
import 'package:shared_preferences/shared_preferences.dart';

Future<String> getOrCreateUuid() async {
  final prefs = await SharedPreferences.getInstance();
  String? uuidValue = prefs.getString('uuid');

  if (uuidValue == null) {
    uuidValue = Uuid().v4();
    await prefs.setString('uuid', uuidValue);
    print("새 UUID 생성: $uuidValue");
  } else {
    print("기존 UUID 사용: $uuidValue");
  }
  return uuidValue;
}
```

---

## 💡 요약
| 패키지 | 역할 | 필요성 |
|--------|------|--------|
| `uuid` | 고유 식별자 생성 | 디바이스/사용자 구분 |
| `shared_preferences` | 데이터 영구 저장 | 앱 종료 후에도 값 유지 |
| **둘의 조합** | 한 번 만든 고유값을 앱이 계속 기억 | 중복 로그인 방지, 사용자 추적 |

---

**결론:**  
이번 프로젝트에서 이 둘을 같이 쓴 건 **고유 식별값을 안전하게 생성하고, 안정적으로 저장**하는 최적의 방법이다.  
따라서 사용자 관리나 중복 로그인 방지, 기기 식별 같은 로직이 훨씬 안정적으로 돌아간다.

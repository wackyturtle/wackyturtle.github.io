---
layout: single
title: "스파르타 내일배움 캠프 TIL 26일차"
date: 2025-07-11 19:00:00 +0900
categories: [TIL, all]
classes: wide
sidebar:
    nav: "counts"
---
<br><br>
# 콜백 함수 쫑 정리

---

콜백함수에 대해서 원래 온보딩 주간에 앱개발 종합반으로 가볍게 다루고 넘어갔었는데  
어렴풋이 기억은 나지만 확실하게 잡고 가고싶어서 이부분에 대해서 심화정리를 해보았다.

---

## 🙋‍♂️ Q1.  
**콜백 함수란 정확히 뭐야?**

### 💬 A1.  
콜백 함수는 **지금 당장 실행하지 않고, 나중에 누군가 대신 실행해주도록 전달해 놓는 함수**예요.

예를 들어 버튼을 만들 때:

```dart
Button(onPressed: () {
  print("버튼 눌림!");
});
```

이 `onPressed`는 버튼이 눌렸을 때 실행되도록 **미리 전달된 콜백 함수**인 거죠.

---

## 🤔 (궁금증 1)  
**그럼 함수도 결국 변수처럼 전달이 가능한 거야?**

### 💬 A1-1.  
맞아요! Dart에서는 함수도 "1급 객체(First-class citizen)"이기 때문에,  
**변수에 저장하거나 다른 클래스나 위젯에 전달할 수 있어요.**

즉, 함수도 일종의 **데이터**처럼 다룰 수 있는 거죠.

---

## 🙋‍♂️ Q2.  
그럼 내가 전달한 콜백 함수랑, 그걸 받은 쪽의 함수는 **다른 함수가 되는 거야? 복사되는 거야?**

### 💬 A2.  
아니에요. **같은 함수 인스턴스**예요.

콜백 함수를 넘긴다는 건 **함수를 복사해서 새로 만드는 게 아니라, 그 함수의 "주소값"을 넘기는 것**이에요.  
즉, 전달받은 쪽은 **그 주소를 통해 원래 함수에 접근하는 것**이죠.

---

## 🤔 (궁금증 2)  
함수도 결국 메모리 어딘가에 있을 텐데,  
그렇다면 그냥 주소값을 `int` 타입으로 넘겨서 호출하면 더 간단하고 효율적인 거 아냐?

### 💬 A2-1.  
겉보기엔 그럴 듯해 보이지만, **매우 위험하고 불안정해요.**

`int`는 단순한 숫자일 뿐,  
그게 가리키는 주소가 **함수인지, 데이터인지, 몇 개의 인자를 받아야 하는지** 아무런 정보도 없어요.

---

## 🙋‍♂️ Q3.  
그래서 Dart에선 `void Function(String)` 이런 식으로 **함수 타입**을 명시하는구나?

### 💬 A3.  
맞아요!  
이런 타입 선언은 단순한 문법이 아니라, **안전한 함수 호출을 위한 설계**예요.

```dart
final void Function(String name) onHello;
```

이건 **"문자열 하나를 받아서 아무것도 반환하지 않는 함수"만 저장할 수 있는 변수**라는 뜻이고,  
이렇게 하면 컴파일러가 타입 검사를 해주고, 런타임 오류를 막을 수 있어요.

---

## 🤔 (궁금증 3)  
오케이, 그럼 내부적으로는 어떻게 저장되는 걸까?  
그냥 주소만 들고 있는 거야?

### 💬 A3-1.  
아니요! Dart 같은 언어는 함수를 아래처럼 **복합 객체로 저장**해요:

```
Function 객체
├─ codePointer (함수 시작 주소)
├─ signature (매개변수 타입, 반환 타입)
├─ closure variables (외부 변수 참조)
```

즉, 함수는 단순한 "주소값 하나"가 아니라:

- **어디에 있는지 (code)**
- **어떻게 생겼는지 (시그니처)**
- **무엇을 기억하고 있는지 (클로저)**

를 모두 포함한 **함수 객체(Function Object)**인 거예요.

---

## 🙋‍♂️ Q4.  
그럼 콜백이란 건 결국 **함수 참조를 다른 객체에게 위임하고,  
그 객체가 그 함수를 나중에 호출해주는 구조**라는 거네?

### 💬 A4.  
완벽하게 이해했어요! 🎯  
콜백은 **"실행 권한을 위임하고, 실행 시점을 외부에 맡기는 함수"**예요.

> 직접 실행 ❌ → 실행 권한만 넘기기 ✅

UI 프레임워크나 비동기 로직 등에서 콜백은 필수적인 개념이에요.

---

## 최종예시
✅ 예시: 콜백 함수 전달 & 사용
```dart
// 콜백 함수 타입을 명확하게 정의 (생략도 가능하지만 가독성을 위해 typedef 사용)
typedef MessageCallback = void Function(String message);

// 호출을 위임받는 클래스
class Messenger {
  final MessageCallback onSend;

  Messenger({required this.onSend});

  void deliverMessage() {
    // 어떤 이벤트나 상황 발생 시 콜백 함수 호출
    print("Messenger: 메시지를 전달합니다...");
    onSend("안녕, 나는 콜백이야!");
  }
}

// 콜백 함수를 제공하는 쪽
void main() {
  // 콜백으로 전달할 함수 정의
  void handleMessage(String msg) {
    print("Main: 받은 메시지 → $msg");
  }

  // Messenger 인스턴스를 만들고 콜백 함수 전달
  Messenger messenger = Messenger(onSend: handleMessage);

  // 메시지 전송 동작 실행
  messenger.deliverMessage();
}
```
💡 실행 결과
```dart
Messenger: 메시지를 전달합니다...
Main: 받은 메시지 → 안녕, 나는 콜백이야!
```
🧠 설명 요약
파트	역할
**handleMessage(String)**	메인 함수에서 정의한 콜백 함수  
**Messenger** 클래스	콜백을 **onSend**로 받아서 내부에서 나중에 호출  
**onSend("...")**	전달받은 콜백 함수 실행 (이때 **handleMessage**가 호출됨)  

이 구조는 아주 전형적인 "이벤트 → 콜백 함수 실행" 패턴이고,  
Flutter에서 버튼 클릭, 리스트 선택 등 사용자 인터랙션 처리에 자주 쓰여요.  



---


## ✅ 전체 요약

| 질문 | 요점 정리 |
|------|-----------|
| 콜백이란? | 나중에 실행되도록 넘겨주는 함수 |
| 함수는 참조 가능한가? | ✅ 변수처럼 전달됨 (1급 객체) |
| 전달되면 새로 복사됨? | ❌ 아니요. 같은 함수 주소를 참조함 |
| 왜 타입을 명시해야 하나? | ✅ 컴파일 안전성, 호출 가능성 보장을 위해 |
| 내부 구조는? | 코드 주소 + 타입 정보 + 캡처된 변수들이 포함된 객체 |





차후 dart로 분류

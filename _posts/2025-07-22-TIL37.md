---
layout: single
title: "ìŠ¤íŒŒë¥´íƒ€ ë‚´ì¼ë°°ì›€ ìº í”„ TIL 37ì¼ì°¨"
date: 2025-07-22 19:00:00 +0900
categories: [TIL, all]
classes: wide
sidebar:
    nav: "counts"
---
<br><br>
# ğŸ“ Flutter GridView ì •ë¦¬

---

## ğŸ™‹â€â™‚ ë§ˆì£¼í•œ íŠ¸ëŸ¬ë¸”:
> GridViewì—ì„œ 1ê°œ, 2ê°œë§Œ ë“±ë¡ë¼ë„ í•­ìƒ 3ì¹¸ í˜•ì‹ì„ ë§ì¶”ê³  ì‹¶ë‹¤  
> ì•ˆ ê·¸ëŸ¬ë©´ ë ˆì´ì•„ì›ƒì´ ë“¤ì­‰ë‚ ì­‰í•´ì„œ ë³´ê¸°ì— ì•ˆ ì´ì˜ë‹¤

---

## âœ… í•´ê²° ë°©ë²•: ë¹ˆ ì¹¸ì„ `null`ë¡œ ì±„ì›Œ ì •ë ¬ ìœ ì§€

```dart
List<Product?> getFilledList(List<Product> productList) {
  const int itemsPerRow = 3;
  int remainder = productList.length % itemsPerRow;
  int toAdd = remainder == 0 ? 0 : itemsPerRow - remainder;
  return [...productList, ...List.filled(toAdd, null)];
}
```

### ğŸ“Œ ì„¤ëª…
- `itemsPerRow`: í•œ ì¤„ì— ëª‡ ê°œì”© ë³´ì—¬ì¤„ì§€ ì„¤ì • (ì—¬ê¸°ì„  3)
- `remainder`: í˜„ì¬ ë¦¬ìŠ¤íŠ¸ ê°œìˆ˜ì—ì„œ 3ìœ¼ë¡œ ë‚˜ëˆˆ ë‚˜ë¨¸ì§€
- `toAdd`: ë¶€ì¡±í•œ ì¹¸ ìˆ˜
- `List.filled(toAdd, null)`: ë¶€ì¡±í•œ ì¹¸ë§Œí¼ `null`ì„ ì±„ìš´ ë¦¬ìŠ¤íŠ¸ ìƒì„±
- `...`: ë¦¬ìŠ¤íŠ¸ë¥¼ í’€ì–´ì„œ ì´ì–´ ë¶™ì´ëŠ” **ìŠ¤í”„ë ˆë“œ ì—°ì‚°ì**

---

## âœ… GridView.builder ì ìš© ì˜ˆì‹œ

```dart
GridView.builder(
  itemCount: getFilledList(productList).length,
  gridDelegate: SliverGridDelegateWithFixedCrossAxisCount(
    crossAxisCount: 3,
    crossAxisSpacing: 10,
    mainAxisSpacing: 10,
  ),
  itemBuilder: (context, index) {
    final product = getFilledList(productList)[index];
    if (product == null) return SizedBox.shrink(); // ë¹ˆ ì¹¸ì€ ê³µê°„ë§Œ ì°¨ì§€
    return ProductBox(product: product); // ì‹¤ì œ ìƒí’ˆ ìœ„ì ¯
  },
)
```

---

## âœ… íš¨ê³¼
- í•­ëª© ê°œìˆ˜ì™€ ê´€ê³„ì—†ì´ **í•­ìƒ 3ê°œì”© ê¹”ë”í•œ í–‰ ì •ë ¬**
- **ì™¼ìª½ë¶€í„° ì±„ì›Œì§€ëŠ” êµ¬ì¡° ìœ ì§€**
- ë ˆì´ì•„ì›ƒì´ ë“¤ì­‰ë‚ ì­‰í•˜ì§€ ì•Šì•„ **ë””ìì¸ ì™„ì„±ë„ ìƒìŠ¹**

---


## âœ…ì´ ë¬¸ì œë¥¼ ê·¸ëŒ€ë¡œ ë¦¬ìŠ¤íŠ¸ë·°ë¡œ ì²˜ë¦¬í• ë ¤ í–ˆë‹¤ë©´ ì¼ì–´ë‚˜ëŠ” ì¼ë“¤

### ë¦¬ìŠ¤íŠ¸ë·°ë¡œ í•´ê²°í•˜ê³ í”ˆ ì˜¤ê¸°ê°€ ìƒê²¨ ë„ì „í•´ë³´ì•˜ë‹¤

ì½”ë“œëŠ” ì•„ë˜ë¥¼ ì°¸ì¡°
- ì•„ê¹Œì›Œì„œ ì˜¬ë¦¼
```dart

import 'package:flutter/material.dart';
import 'package:flutter_pxmarket_app/product_detail_page/product_detail_page.dart';
import 'package:flutter_pxmarket_app/product_regist_page/product_regist_page.dart';
import 'package:flutter_pxmarket_app/widget/product.dart';
import 'package:flutter_svg/svg.dart';
import 'package:intl/intl.dart';
import 'package:flutter_pxmarket_app/widget/method.dart';


class ProductListPage extends StatefulWidget {
  @override
  State<ProductListPage> createState() => _ProductListPageState();
}

class _ProductListPageState extends State<ProductListPage> {
  final List<Product> productList = [];

  // ë¦¬ìŠ¤íŠ¸ì— ë¹ˆ ìš”ì†Œ ì±„ì›Œì£¼ê¸°
  List<Product?> getFilledList(List<Product> productList) {
    const int itemsPerRow = 3;
    int remainder = productList.length % itemsPerRow;
    int toAdd = remainder == 0 ? 0 : itemsPerRow - remainder;
    return [
      ...productList, // ... == ë¦¬ìŠ¤íŠ¸ë¥¼ í•˜ë‚˜ì”© ë¶„ë¦¬í•´ì„œ ë°˜í™˜
      ...List.filled(toAdd, null), // List.filled(ê¸¸ì´, ë„£ê³ ì‹¶ì€ ê²ƒ)
    ];
  }

  //ìƒí’ˆ ë“±ë¡ ë²„íŠ¼ ëˆŒë ¸ì„ ë•Œ
  void productAdd() async {
    final newProduct = await Navigator.push(
      context,
      MaterialPageRoute(builder: (_) => ProductRegistPage()),
    );
    if (newProduct != null && newProduct is Product) {
      setState(() {
        productList.add(newProduct);
        getFilledList(productList);
      });
    }
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: titleMethod('PX ë§ˆì¼“'),
        centerTitle: true,
        backgroundColor: Color(0xFF3E5630),
        actions: [goToCart(context)],
      ),
      //ìƒí’ˆì´ ìˆëŠ”ì§€ ì—†ëŠ”ì§€ ì²´í¬
      body: productList.isEmpty
          ? Center(child: Text('ë“±ë¡ëœ ìƒí’ˆì´ ì—†ìŠµë‹ˆë‹¤.'))
          : ListView.separated(
              padding: EdgeInsets.symmetric(vertical: 30),
              itemCount: (productList.length / 3).ceil(),
              itemBuilder: (context, index) =>
                  ProductRow(productList: productList, num: index),
              separatorBuilder: (context, index) => SizedBox(height: 40),
            ),
      floatingActionButtonLocation: FloatingActionButtonLocation.endDocked,
      floatingActionButton: FAB(),
    );
  }

  SizedBox FAB() {
    return SizedBox(
      height: 80,
      width: 80,
      child: FloatingActionButton(
        onPressed: productAdd,
        shape: RoundedRectangleBorder(
          side: BorderSide(color: Color(0xFF3E5630), width: 2),
          borderRadius: BorderRadius.circular(100),
        ),
        backgroundColor: Color(0xFFF9F9F9),
        elevation: 0,
        // svg ì•„ì´ì½˜ ì´ìš©
        child: SvgPicture.asset(
          'assets/icons/add_bold.svg',
          width: 50,
          height: 50,
          colorFilter: ColorFilter.mode(Color(0xFF3E5630), BlendMode.srcIn),
        ),
      ),
    );
  }
}

class ProductRow extends StatelessWidget {
  int num;
  final List<Product> productList;

  ProductRow({super.key, required this.productList, required this.num});

  @override
  Widget build(BuildContext context) {
    // ì‹œì‘ ì¸ë±ìŠ¤: 0, 3, 6, ...
    final startIndex = num * 3;

    // ë ì¸ë±ìŠ¤ëŠ” ë¦¬ìŠ¤íŠ¸ ê¸¸ì´ë³´ë‹¤ ì»¤ì§€ë©´ ì•ˆë˜ë‹ˆê¹Œ min ì²˜ë¦¬
    final endIndex = (startIndex + 3) > productList.length
        ? productList.length
        : startIndex + 3;

    // ë¶€ë¶„ ë¦¬ìŠ¤íŠ¸ ì¶”ì¶œ
    final rowItems = productList.sublist(startIndex, endIndex);

    return Row(
      mainAxisSize: MainAxisSize.max,
      children: List.generate(3, (index) {
        if (index < rowItems.length) {
          final product = rowItems[index];
          return ProductBox(product: product);
        } else {
          // ë‚¨ì€ ê³µê°„ ì±„ìš°ê¸° (ë¹ˆ ì¹¸)
          return Expanded(child: const SizedBox());
        }
      }),
    );
  }
}

class ProductBox extends StatelessWidget {
  final Product product;

  const ProductBox({super.key, required this.product});

  @override
  Widget build(BuildContext context) {
    return Expanded(
      child: GestureDetector(
        onTap: () {
          Navigator.push(
            context,
            MaterialPageRoute(
              builder: (_) => ProductDetailPage(product: product),
            ),
          );
        },
        child: Column(
          children: [
            Container(
              width: 120,
              height: 120,
              decoration: BoxDecoration(
                border: BoxBorder.all(color: Color(0xFF3E5630), width: 2),
                borderRadius: BorderRadius.circular(25),
                image: DecorationImage(
                  image: FileImage(product.productImage),
                  fit: BoxFit.cover,
                ),
              ),
            ),
            SizedBox(
              width: 120,
              child: Padding(
                padding: const EdgeInsets.only(left: 8),
                child: Column(
                  crossAxisAlignment: CrossAxisAlignment.start,
                  children: [
                    SizedBox(height: 10),
                    Text(
                      product.productName,
                      style: TextStyle(fontSize: 15, color: Color(0xFF292929)),
                    ),
                    product.productPrice == 0
                        ? Text(
                            'ë¬´ë£Œ',
                            style: TextStyle(
                              color: Color(0xFF292929),
                              fontSize: 20,
                              fontWeight: FontWeight.bold,
                            ),
                          )
                        : Text(
                            '${NumberFormat('#,###').format(product.productPrice)}ì›',
                            style: TextStyle(
                              fontSize: 20,
                              fontWeight: FontWeight.bold,
                              color: Color(0xFF292929),
                            ),
                          ),
                  ],
                ),
              ),
            ),
          ],
        ),
      ),
    );
  }
}

```
